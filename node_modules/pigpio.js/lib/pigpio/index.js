// Generated by CoffeeScript 2.0.0-beta8
var fs, pigpio, PIGPIO_PATH, safePins, writeCommand;
safePins = [
  4,
  7,
  8,
  9,
  10,
  11,
  14,
  15,
  17,
  18,
  22,
  23,
  24,
  25,
  27
];
fs = require('fs');
PIGPIO_PATH = '/dev/pigpio';
writeCommand = function (cmd) {
  var buffer, fd;
  buffer = new Buffer(cmd + '\n');
  return fd = fs.open(PIGPIO_PATH, 'w', eval('undefined'), function (err, fd) {
    if (err) {
      return console.log('Error opening file: ' + err);
    } else {
      return fs.write(fd, buffer, 0, buffer.length, -1, function (error, written, buffer) {
        if (error) {
          return console.log('Error occured writing to ' + PIGPIO_PATH + ': ' + error);
        } else {
          return fs.close(fd);
        }
      });
    }
  });
};
pigpio = {
  setPwm: function (pin, value) {
    return in$(pin, safePins) && writeCommand('P ' + pin + ' ' + value * 255);
  },
  setPwmFrequency: function (pin, hertz) {
    hertz = Math.min(hertz, 8e3);
    return in$(pin, safePins) && writeCommand('PFS ' + pin + ' ' + hertz);
  }
};
module.exports = pigpio;
function in$(member, list) {
  for (var i = 0, length = list.length; i < length; ++i)
    if (i in list && list[i] === member)
      return true;
  return false;
}
